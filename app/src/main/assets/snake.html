<head>

<link href="assets/style/style.css" rel="stylesheet">
<script src="assets/js/jquery-3.3.1.min.js"></script>

<canvas id="gc" width="400" height="400" style=""></canvas>

<script>
window.onload=function() {
	canv=document.getElementById("gc");
	ctx=canv.getContext("2d");
	document.addEventListener("keydown",keyPush);
	setInterval(game,1000/15);

}
px=py=10;
gs=tc=20;
ax=ay=15;
xv=yv=0;
trail=[];
tail = 5;
var playing = false;
var dead = false;
var moving = false;
var hscore = 0;
function game() {

	var over = document.getElementById("over");
	over.style.display = "none";

	px+=xv;
	py+=yv;
	if(px<0) {
		px= tc-1;
	}
	if(px>tc-1) {
		px= 0;
	}
	if(py<0) {
		py= tc-1;
	}
	if(py>tc-1) {
		py= 0;
	}

	var grd=ctx.createRadialGradient(200,200,0,200,200,250);
	grd.addColorStop(0,"rgb(98, 76, 112)");
	grd.addColorStop(1,"black");
	ctx.shadowBlur=30;
	ctx.shadowColor="white";
	ctx.font = "50px Arial";
	ctx.fillText("Hello World",100,100);

	ctx.fillStyle=grd;


	ctx.fillRect(0,0,canv.width,canv.height);

	var gradient =ctx.createRadialGradient(200,200,50,200,200,200)
	gradient.addColorStop(0,"rgb(69, 214, 64)");
	gradient.addColorStop(1,"rgb(26, 76, 35)");


	ctx.fillStyle=gradient;
	for(var i=0;i<trail.length;i++) {

		ctx.fillRect(trail[i].x*gs,trail[i].y*gs,gs-2,gs-2);
		if(trail[i].x==px && trail[i].y==py) {
			if (playing == false){
			tail = 2;
			}
			else{
			xv = 0;
			yv = 0;
			dead = true;
			over.style.display = "block";
			}
		}
	}
	trail.push({x:px,y:py});
	moving == false;
	while(trail.length>tail) {
	moving == true;
	trail.shift();
	}

	if(ax==px && ay==py) {
		tail++;
		if(tail > hscore){
			hscore = tail - 2;
		}
		document.getElementById("points").innerHTML = "Points: " + (tail - 2) +" High Score: " + hscore;
		ax=Math.floor(Math.random()*tc);
		ay=Math.floor(Math.random()*tc);
	}

	var gradient2 = ctx.createRadialGradient(200,200,50,200,200,200);
	gradient2.addColorStop(0,"yellow");
	gradient2.addColorStop(1,"red");
	ctx.fillStyle=gradient2;
	ctx.fillRect(ax*gs,ay*gs,gs-2,gs-2);

	if(dead == true){
		tail = 2;
		dead = false;
	}
}
function keyPush(evt) {
	switch(evt.keyCode) {
		case 37:
			if (xv!= 1){
				xv=-1;yv=0;
				}
			var isHidden = false;
			var hide = document.getElementById("hide");
			var away = document.getElementById("away");
			if (isHidden == false){
				hide.style.display = "none";
				away.style.display = "none";
				return playing = true;
			}
			break;
		case 38:
			if (yv!= 1){
				xv=0;yv=-1;
				}
			var isHidden = false;
			var hide = document.getElementById("hide");
			var away = document.getElementById("away");
			if (isHidden == false){
				hide.style.display = "none";
				away.style.display = "none";
				return playing = true;
			}
			break;
		case 39:
			if (xv!= -1){
				xv=1;yv=0;
				}
			var isHidden = false;
			var hide = document.getElementById("hide");
			var away = document.getElementById("away");
			if (isHidden == false){
				hide.style.display = "none";
				away.style.display = "none";
				return playing = true;
			}
			break;
		case 40:
			if (yv!= -1){
				xv=0;yv=1;
				}
			var isHidden = false;
			var hide = document.getElementById("hide");
			var away = document.getElementById("away");
			if (isHidden == false){
				hide.style.display = "none";
				away.style.display = "none";
				return playing = true;
			}
			break;
		case 81:
			for(var i=0;i<trail.length;i++) {
				trail[i].x=px;
				trail[i].y=py;
				ctx.fillRect(trail[i].x*gs,trail[i].y*gs,gs-2,gs-2);
				if(trail[i].x==px && trail[i].y==py) {
					if (playing == false){
					tail = 2;
					}
				else{
					xv = 0;
					yv = 0;
					dead = true;
					over.style.display = "block";
			}
		}
	}
	}
}

 // navBar
function openNav() {
    document.getElementById("mySidenav").style.width = "75%";
}

function closeNav() {
    document.getElementById("mySidenav").style.width = "0";
}

function show(x){
	var y=0;
	var z=0;

	$('div#sad').hide();

	while($("#"+y).length){
		y++;
	}

	for (i = 0; i < y; i++){
		var className = $('#'+i).attr('class');
		if(x==i){
			$('div#' + className).show();
		}else{
			$('div#' + className).hide();
		}

	}
}

// navBar
</script>
<style>
body{
	background-color : black;
}
canvas{
	border:10px solid rgb(29, 80, 86);
	position:absolute;
	z-index:-1;
}
body {
  margin: 0;
  display: flex;

  /* This centers our sketch horizontally. */
  justify-content: center;

  /* This centers our sketch vertically. */
  align-items: center;
}
audio {
   display:none;
}
html, body {
  height: 100%;
}


h1, h3{
	color:white;
	margin:auto;
}

h2{
	color:white;
	top:-25%;
	margin:15%;
	position:absolute;
}

span{
	top: 0%;
	left: 0%;
	position: absolute;
}

</style>

</head>
<body>

<div id="mySidenav" class="sidenav">
      <a href="index.html"><img src="assets/images/sadparrot.gif">Home</a>
      <a href="wackAMole.html"><img src="assets/images/sadparrot.gif">Wack-a-Mole</a>
      <a href="snake.html"><img src="assets/images/sadparrot.gif">Snake</a>
    </div>
<!-- onmouseout="closeNav()" -->
  <span style="color:white;font-size:30px;cursor:pointer;z-index:0;" onclick="openNav()"> &#9776;</span>

<audio controls autoplay loop>
<source src="music.wav" type="audio/ogg">
</audio>

<h1 id="hide">Snake:</h1>
<h3 id="away">Press a key to play</h3>
<h1 id="over">Game Over</h1>

<h2 id="points">Points: 0 High Score: 0</h2>
</body>
